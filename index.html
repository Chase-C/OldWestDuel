<!DOCTYPE>
<html>
    <head>
        <title>Old West Duel</title>
        <link rel="stylesheet" type="text/css" href="./style.css" />
        <script src="./libs/jquery-1.9.1.min.js"></script>
        <script src="./libs/thunder.js"></script>
        <script src="./Sound.js" type="text/javascript"></script>
        <script src="./Resources.js" type="text/javascript"></script>
        <script src="./UI.js" type="text/javascript"></script>
		<script src="./ScreenMessage.js" type="text/javascript"></script>
		<script src="./AnimSprite.js" type="text/javascript"></script>
        <script src="./Shot.js" type="text/javascript"></script>
        <script src="./Player.js" type="text/javascript"></script>
		<script src="./StageSelection.js" type="text/javascript"></script>
		<script src="./CharacterSelection.js" type="text/javascript"></script>
		<script src="./GameState.js" type="text/javascript"></script>
		<script src="./MenuState.js" type="text/javascript"></script>
        <script src="./Engine.js" type="text/javascript"></script>
        <script src="./Events.js" type="text/javascript"></script>
        <script src="./Run.js" type="text/javascript"></script>
        <script>
            var context = null;

            function deepCopy(src, /* INTERNAL */ _visited) {
                if(src == null || typeof(src) !== 'object'){
                    return src;
                }

                // Initialize the visited objects array if needed
                // This is used to detect cyclic references
                if (_visited == undefined){
                    _visited = [];
                }
                // Otherwise, ensure src has not already been visited
                else {
                    var i, len = _visited.length;
                    for (i = 0; i < len; i++) {
                        // If src was already visited, don't try to copy it, just return the reference
                        if (src === _visited[i]) {
                            return src;
                        }
                    }
                }

                // Add this object to the visited array
                _visited.push(src);

                //Honor native/custom clone methods
                if(typeof src.clone == 'function'){
                    return src.clone(true);
                }

                //Special cases:
                //Array
                if (Object.prototype.toString.call(src) == '[object Array]') {
                    //[].slice(0) would soft clone
                    ret = src.slice();
                    var i = ret.length;
                    while (i--){
                        ret[i] = deepCopy(ret[i], _visited);
                    }
                    return ret;
                }
                //Date
                if (src instanceof Date){
                    return new Date(src.getTime());
                }
                //RegExp
                if(src instanceof RegExp){
                    return new RegExp(src);
                }
                //DOM Elements
                if(src.nodeType && typeof src.cloneNode == 'function'){
                    return src.cloneNode(true);
                }

                //If we've reached here, we have a regular object, array, or function

                //make sure the returned object has the same prototype as the original
                var proto = (Object.getPrototypeOf ? Object.getPrototypeOf(src): src.__proto__);
                if (!proto) {
                    proto = src.constructor.prototype; //this line would probably only be reached by very old browsers 
                }
                var ret = object_create(proto);

                for(var key in src){
                    //Note: this does NOT preserve ES5 property attributes like 'writable', 'enumerable', etc.
                    //For an example of how this could be modified to do so, see the singleMixin() function
                    ret[key] = deepCopy(src[key], _visited);
                }
                return ret;
            }

            //If Object.create isn't already defined, we just do the simple shim, without the second argument,
            //since that's all we need here
            var object_create = Object.create;
            if (typeof object_create !== 'function') {
                object_create = function(o) {
                    function F() {}
                    F.prototype = o;
                    return new F();
                };
            }
            function init()
            {
                var canvas = document.getElementById('canvas');
                if(!canvas.getContext) {
                    alert('Canvas does not support drawing');
                    return;
                }
                canvas.width = 820;
                canvas.height = 640;
            
                context = canvas.getContext('2d');
                Run();
            }
            
            jQuery(function() {
                init();
            })
        </script>
    </head>
    <body>
        <div id="container"><canvas id="canvas"></canvas></div>
    </body>
</html>
